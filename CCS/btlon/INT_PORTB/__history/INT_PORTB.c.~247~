#include <16F877a.h>
#FUSES NOWDT, HS, PUT, NOPROTECT,
#use DELAY(clock=20000000)
#use rs232(baud=9600,xmit=pin_c6,rcv=pin_c7) 

#define tb1 PIN_B0
#define tb2 PIN_B1
#define tb3 PIN_B2
#define tb4 PIN_B3

#define btn1 PIN_B4
#define btn2 PIN_B5
#define btn3 PIN_B6
#define btn4 PIN_B7  
char data;

int8 a,b,c,d = 0;
#INT_RDA
void ngat_uart(){
char d;
if(kbhit()){
d = getc();
   if(d=='5'){
    output_high(tb1);
    output_high(tb2);
    output_high(tb3);
    output_high(tb4);
   }
     if(d=='1'){
    output_high(tb1);
   }
     if(d=='2'){
    output_high(tb2);
   }
     if(d=='3'){
    output_high(tb3);

   }
     if(d=='4'){
    output_high(tb4);
   }

}
}
void main()
{
enable_interrupts(GLOBAL);

enable_interrupts(INT_RDA);

SET_TRIS_B(0b00001111);
output_b(0b11110000);
while(true)
{ 
   if(input(btn1)==0){
    putc('a');
    output_high(tb1);
    a++;
    while(input(btn1)==0);
   }
   if(input(btn2)==0){
    putc('b');
    output_high(tb2);
    b++;
    while(input(btn2)==0);
   }
   if(input(btn3)==0){
    putc('c');
    output_high(tb3);
    c++;
    while(input(btn3)==0);
   }
   if(input(btn4)==0){
    putc('d');
    output_high(tb4);
    d++;
    while(input(btn4)==0);
   }
   
   //
   
    if(a==2){
    putc('A');
    output_low(tb1);
    a=0;
   }
   
    if(b==2){
    putc('B');
    output_low(tb2);
    b=0;
  
   }
   
    if(c==2){
    putc('C');
    output_low(tb3);
    c=0;
  
   }
   
    if(d==2){
    putc('D');
    output_low(tb4);
    d=0;
  
   }
   
}
}
